<?// Bloc HTML réalisant l'affichage de la page de modification d'une fiche

// Ce fichier est l'unique endroit ou peuvent se trouver des balises HTML
// Un couple <ouverture de balise> </fermeture de balise> doit se trouver dans le même fichier et avec la même indentation
// Ce fichier ne contient que des balises HTML et des balises de contrôle PHP
// $modele contient les données passées par le fichier PHP
// $config les données communes à tout WRI

// 27/05/12 Dominique : Création
?>

<div class="contenu">
	<h3><?=$action?> <?=$point->article_partitif_point_type?> <?=$point->nom_type?></h3>
	<?=$etape?>

	<?// Si on a une latitude et une longitude, on peut afficher notre carte, sinon autant pas montrer une carte bidon sly 04/05/2010
	if ($point->latitude!="" and $point->longitude!="") {?>
		<div class="carte_edit" id="carte-edit"></div>
	<?}?>
	<form method="post" action="<?=$vue->page_action?>">
	<dl>
		<dt><?=$boutton_actions?></dt>
		<dt>Coordonnées:</dt>
		<dd>
			<p class="libelle">Position:</p>
			
			<span id="titre-lon">Longitude</span>:
			<input <?=$disabled_field?> type="text" id="proj-lon" name="longitude" size="12" maxlength="12" value="<?=$point->longitude?>" />
			<input type="text" id="lon" name="longitude" style="display:none" value="<?=$point->longitude?>" />
			
			<span id="titre-lat">Latitude</span>:
			<input <?=$disabled_field?> type="text" id="proj-lat" name="latitude"  size="12" maxlength="12" value="<?=$point->latitude?>" />
			<input type="text" id="lat" name="latitude" style="display:none" value="<?=$point->latitude?>" />
			
			<select id="select-projection">
				<option>Degrés décimaux</option><?/* Initialise le champ au chargement de la page. Sera écrasé par innerHTML */?>
			</select>
			
			<p><a onclick="viseur.centre()" href="#" title="Remettre le viseur au centre actuel de la carte">Recentrer le viseur sur la carte</a></p>
			<p>Degrés décimaux WGS84 ex: 45.2356 et -5.2354. Déplacez le viseur pour modifier la position (n'oubliez pas de valider).</p>
		</dd>
		<dd>
			<div class="libelle">altitude:</div>
			<input <?=$disabled_field?> type="text" name="altitude" size="6" value="<?=$point->altitude?>" />m
		</dd>
		<dd>	
			<div class="libelle">Précision:</div>
			<select <?=$disabled_field?> name="id_type_precision_gps">
				<?	foreach ($modele->infos_base->type_precision AS $gps) { ?>
						<option  value="<?=$gps->id_type_precision_gps?>">
							<?=$gps->nom_precision_gps ?>
						</option>
					<?}?>
			</select>
		</dd>
		<dt>informations de base:</dt>
		<dd>
			<div class="libelle">nom:</div>
			<input size="40" type="text" name="nom" value="<?echo htmlentities($point->nom,ENT_QUOTES,"UTF-8")?>" />
		</dd>
		<dd>
			<div class="libelle">Type de point:</div>
			<select name='id_point_type'>
					<?	foreach ($modele->infos_base->types_point AS $tp) { ?>
						<option  value="<?=$tp->id_point_type?>">
							<?=$tp->nom_type ?>
						</option>
					<?}?>
			</select>
			<a href="http://www.refuges.info/statique/mode_emploi.php?page=autres_points">
				Explications plus précises sur les différents types de points
			</a>
		</dd>

		<?// tous les points n'ont pas de raison d'avoir ce champ ( lac, sommets, etc.)
		if ($point->equivalent_places!="") {?>
			<dd>
				<div class="libelle"><?=$point->equivalent_places?>:</div>
				<input type="text" name="places" size="8" value="<?=$point->places?>" />
			</dd>
		<?}?>
		<dt>Champs déscriptifs:</dt>

		<?=$htmlconstruct?>
		<dt style='clear: both;'><?=$boutton_actions?></dt>
	</dl>
	</form>
</div>
