/*DCM++ Â© Florent Coste 2012 * Published under the Clear BSD license. * See http://svn.openlayers.org/trunk/openlayers/license.txt for the full text of the license. *//** * @requires OpenLayers/Control/Navigation.js * @requires OpenLayers/Format/GPX.js * @requires OpenLayers/Projection.js *//** * Class: OpenLayers.Control.SaveFeature * Create an instance of OpenLayers.Control.Navigation that save the edited paths on http://visugpx.com * * Inherits from: *  - <OpenLayers.Control.Navigation> */OpenLayers.Control.VisuGPXSaveFeature = OpenLayers.Class(OpenLayers.Control.Navigation, {    activate: function () {        var r = OpenLayers.Control.Navigation.prototype.activate.apply(this,arguments);				var format = new OpenLayers.Format.GPX({			'internalProjection': this.map.baseLayer.projection,			'externalProjection': new OpenLayers.Projection('EPSG:4326')		});		var data=format.write(this.layer.features);		// fixe bug sous Chrome qui rajoute de prefixes gpx:		data=data.replace(/gpx\:/gi,"");		OpenLayers.Util.getElement('datasave').value = data;		form = OpenLayers.Util.getElement('formsave')		form.submit();		this.deactivate();		return r;    },	CLASS_NAME: "OpenLayers.Control.VisuGPXSaveFeature"});